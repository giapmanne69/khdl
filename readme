# KKBox Music Recommendation System (End-to-End Project)

Dá»± Ã¡n xÃ¢y dá»±ng há»‡ thá»‘ng gá»£i Ã½ bÃ i hÃ¡t Hybrid (Lai ghÃ©p) thÃ´ng minh, Ä‘i tá»« phÃ¢n tÃ­ch dá»¯ liá»‡u thÃ´ (EDA) Ä‘áº¿n triá»ƒn khai á»©ng dá»¥ng thá»±c táº¿ (Real-time Web App). Há»‡ thá»‘ng káº¿t há»£p giá»¯a **Collaborative Filtering (SVD)**, **Content-Based Filtering** vÃ  cÃ¡c **Chiáº¿n thuáº­t Nghiá»‡p vá»¥ (Business Rules)** Ä‘áº·c thÃ¹.

---

## ğŸ“š Tá»•ng quan cÃ¡c giai Ä‘oáº¡n (Project Roadmap)

Dá»± Ã¡n Ä‘Æ°á»£c chia lÃ m 7 giai Ä‘oáº¡n chÃ­nh (Phases):

### ğŸ”¹ Phase 1 & 2: Data Preprocessing & EDA (Tiá»n xá»­ lÃ½ & KhÃ¡m phÃ¡)
* **Má»¥c tiÃªu:** LÃ m sáº¡ch dá»¯ liá»‡u vÃ  tÃ¬m ra cÃ¡c "Gold Features".
* **Ká»¹ thuáº­t:**
    * Xá»­ lÃ½ Missing Values (KNN Imputer).
    * Chuáº©n hÃ³a dá»¯ liá»‡u (MinMaxScaler cho Ä‘á»™ dÃ i bÃ i hÃ¡t, tuá»•i).
    * **TF-IDF** Ä‘á»ƒ xá»­ lÃ½ tÃªn nghá»‡ sÄ© vÃ  nháº¡c sÄ©.
    * **SVD** Ä‘á»ƒ giáº£m chiá»u dá»¯ liá»‡u thá»ƒ loáº¡i (Genre).
* **Key Insights:**
    * PhÃ¡t hiá»‡n "Various Artists" lÃ  dá»¯ liá»‡u nhiá»…u.
    * NgÃ´n ngá»¯ 31 cÃ³ tá»· lá»‡ nghe láº¡i (Retention) cao nháº¥t.
    * Äá»™ dÃ i bÃ i hÃ¡t "vÃ ng" náº±m trong khoáº£ng 3.5 - 4.2 phÃºt.

### ğŸ”¹ Phase 3: Base Modeling (MÃ´ hÃ¬nh lÃµi)
* **Má»¥c tiÃªu:** XÃ¢y dá»±ng cÃ¡c thuáº­t toÃ¡n cÆ¡ báº£n.
* **Content-Based:** Sá»­ dá»¥ng `Cosine Similarity` Ä‘á»ƒ tÃ¬m bÃ i hÃ¡t tÆ°Æ¡ng tá»± vá» máº·t ná»™i dung (Artist, Genre, Language).
* **Collaborative Filtering:** Sá»­ dá»¥ng `TruncatedSVD` (Matrix Factorization) Ä‘á»ƒ há»c hÃ nh vi ngÆ°á»i dÃ¹ng trÃªn ma tráº­n thÆ°a.

### ğŸ”¹ Phase 4: Business Tactics (Chiáº¿n thuáº­t Nghiá»‡p vá»¥)
* **Má»¥c tiÃªu:** Tinh chá»‰nh káº¿t quáº£ gá»£i Ã½ dá»±a trÃªn Insight tá»« Phase 2 Ä‘á»ƒ tÄƒng tráº£i nghiá»‡m ngÆ°á»i dÃ¹ng (UX).
* **Chiáº¿n thuáº­t Ã¡p dá»¥ng:**
    1.  **Penalty (Pháº¡t):** Giáº£m Ä‘iá»ƒm máº¡nh cÃ¡c bÃ i hÃ¡t thuá»™c "Various Artists" (x0.7) vÃ  thá»ƒ loáº¡i Pop Ä‘áº¡i trÃ  (x0.5) Ä‘á»ƒ trÃ¡nh spam.
    2.  **Boost (ThÆ°á»Ÿng):** TÄƒng Ä‘iá»ƒm (x1.25) cho danh sÃ¡ch **High-Trust Artists** (Nghá»‡ sÄ© cÃ³ tá»· lá»‡ nghe láº¡i > 65% nhÆ° Jason Mraz).
    3.  **Context Boost:** TÄƒng Ä‘iá»ƒm cá»±c máº¡nh (x1.5) cho bÃ i hÃ¡t **NgÃ´n ngá»¯ 31** náº¿u phÃ¡t hiá»‡n User cÃ³ gu nÃ y.
    4.  **Gold Duration:** Æ¯u tiÃªn bÃ i hÃ¡t cÃ³ thá»i lÆ°á»£ng 3.5 - 4.2 phÃºt.

### ğŸ”¹ Phase 5: Evaluation & Optimization (ÄÃ¡nh giÃ¡ & Tá»‘i Æ°u)
* **Má»¥c tiÃªu:** CÃ¢n báº±ng giá»¯a Ä‘á»™ chÃ­nh xÃ¡c toÃ¡n há»c (RMSE) vÃ  Ä‘á»™ hÃ i lÃ²ng (Hit Rate).
* **HÃ nh Ä‘á»™ng:**
    * TÄƒng `n_components` cá»§a SVD lÃªn **50** Ä‘á»ƒ giáº£m RMSE xuá»‘ng má»©c cháº¥p nháº­n Ä‘Æ°á»£c.
    * Thiáº¿t láº­p tá»· trá»ng Hybrid: **70% CF + 30% Content-Based**.
    * Sá»­ dá»¥ng Simulation Ä‘á»ƒ Ä‘o lÆ°á»ng **Hit Rate@10** (Tá»· lá»‡ gá»£i Ã½ trÃºng Ã­t nháº¥t 1 bÃ i user thÃ­ch).

### ğŸ”¹ Phase 6: Web Application (Giao diá»‡n cÆ¡ báº£n)
* **CÃ´ng nghá»‡:** Streamlit.
* **TÃ­nh nÄƒng:**
    * Cho phÃ©p chá»n User vÃ  BÃ i hÃ¡t ngá»¯ cáº£nh.
    * Hiá»ƒn thá»‹ danh sÃ¡ch Top 10 kÃ¨m lÃ½ do gá»£i Ã½ (VD: "Uy tÃ­nâ­", "Gu Lang31ğŸ”¥").
    * Trá»±c quan hÃ³a Ä‘iá»ƒm sá»‘ báº±ng thanh tiáº¿n trÃ¬nh.

### ğŸ”¹ Phase 7: Advanced Real-time System (Há»‡ thá»‘ng NÃ¢ng cao)
* **Má»¥c tiÃªu:** Biáº¿n dá»± Ã¡n thÃ nh sáº£n pháº©m cÃ³ kháº£ nÄƒng há»c tá»©c thÃ¬ (Online Learning).
* **TÃ­nh nÄƒng Ä‘á»™t phÃ¡:**
    * **Firebase Database:** LÆ°u trá»¯ lá»‹ch sá»­ nghe nháº¡c vÄ©nh viá»…n.
    * **Dynamic Embeddings:** Vector sá»Ÿ thÃ­ch cá»§a User khÃ´ng cÃ²n tÄ©nh. NÃ³ Ä‘Æ°á»£c cáº­p nháº­t ngay láº­p tá»©c theo cÃ´ng thá»©c:
      $$V_{new} = 0.7 \times V_{long\_term} + 0.3 \times V_{short\_term}$$
    * **Real-time Interaction:** NgÆ°á»i dÃ¹ng báº¥m "Nghe" -> Há»‡ thá»‘ng log vÃ o DB -> TÃ­nh láº¡i Vector -> Gá»£i Ã½ thay Ä‘á»•i ngay láº­p tá»©c.
    * **Cloud Ready:** Cáº¥u trÃºc code sáºµn sÃ ng Ä‘á»ƒ deploy lÃªn Streamlit Cloud.

---

## ğŸ› ï¸ CÃ i Ä‘áº·t & Cháº¡y dá»± Ã¡n

### 1. YÃªu cáº§u há»‡ thá»‘ng
* Python 3.8+
* CÃ¡c thÆ° viá»‡n:
    ```text
    streamlit
    pandas
    numpy
    scikit-learn
    scipy
    ```

### 2. Cáº¥u trÃºc thÆ° má»¥c
project_folder/ 
â”œâ”€â”€ 1_data_crawling.py #Táº£i dá»¯ liá»‡u tá»« Kaggle
â”œâ”€â”€ 2_data_cleaning.py #LÃ m sáº¡ch dá»¯ liá»‡u, xuáº¥t dá»¯ liá»‡u má»›i
â”œâ”€â”€ 3_visualization.py #Trá»±c quan hÃ³a dá»¯ liá»‡u
â”œâ”€â”€ 4_modeling.py #XÃ¢y dá»±ng mÃ´ hÃ¬nh
â”œâ”€â”€ 5_evaluation.py #ÄÃ¡nh giÃ¡ mÃ´ hÃ¬nh
â”œâ”€â”€ 6_web.py # MÃ£ nguá»“n chÃ­nh 
â”œâ”€â”€ datasets #ThÆ° má»¥c dá»¯ liá»‡u gá»‘c
â””â”€â”€ final_datasets/ # ThÆ° má»¥c dá»¯ liá»‡u Ä‘Ã£ xá»­ lÃ½ 
    â”œâ”€â”€ processed_songs.csv #Dá»¯ liá»‡u bÃ i hÃ¡t Ä‘Ã£ Ä‘Æ°á»£c xá»­ lÃ½
    â”œâ”€â”€ processed_train.csv #Dá»¯ liá»‡u train Ä‘Ã£ Ä‘Æ°á»£c xá»­ lÃ½
    â”œâ”€â”€ song_mapping.csv #Dá»¯ liá»‡u bÃ i hÃ¡t gá»‘c kÃ¨m song_id Ä‘Ã£ Ä‘Æ°á»£c mÃ£ hÃ³a
    â””â”€â”€ members_mapping.csv #Dá»¯ liá»‡u ngÆ°á»i dÃ¹ng gá»‘c kÃ¨m user_id Ä‘Ã£ Ä‘Æ°á»£c mÃ£ hÃ³a

---

## ğŸŒŸ Äiá»ƒm ná»•i báº­t cá»§a Thuáº­t toÃ¡n (Algorithm Highlights)

1.  **SVD Tuned:** Sá»­ dá»¥ng Matrix Factorization vá»›i 50 chiá»u áº©n Ä‘á»ƒ náº¯m báº¯t cÃ¡c pattern phá»©c táº¡p.
2.  **Hybrid Engine:** Káº¿t há»£p sá»©c máº¡nh cá»§a viá»‡c hiá»ƒu ná»™i dung bÃ i hÃ¡t (Content) vÃ  hÃ nh vi Ä‘Ã¡m Ä‘Ã´ng (CF).
3.  **Real-time Feedback Loop:** Há»‡ thá»‘ng khÃ´ng chá» train láº¡i (Re-train) mÃ  pháº£n á»©ng ngay láº­p tá»©c vá»›i hÃ nh Ä‘á»™ng má»›i nháº¥t cá»§a ngÆ°á»i dÃ¹ng nhá» ká»¹ thuáº­t **Vector Averaging**.
4.  **Anti-Noise Logic:** CÃ¡c bá»™ lá»c nghiá»‡p vá»¥ giÃºp loáº¡i bá» cÃ¡c gá»£i Ã½ rÃ¡c (Various Artists) vÃ  tÄƒng tÃ­nh Ä‘a dáº¡ng (Diversity) cho danh sÃ¡ch phÃ¡t.